# ğŸš€ Redocly + OpenAPIå®Œå…¨ã‚¬ã‚¤ãƒ‰ - ç¾ã—ã„APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ–¹æ³•

## ã¯ã˜ã‚ã«

APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã£ã¦ã€æ›¸ãã®ã‚‚ç®¡ç†ã™ã‚‹ã®ã‚‚é¢å€’ã§ã™ã‚ˆã­ï¼Ÿç‰¹ã«ä»•æ§˜å¤‰æ›´ã®ãŸã³ã«æ‰‹å‹•ã§æ›´æ–°ã™ã‚‹ã®ã¯æœ¬å½“ã«å¤§å¤‰ã§ã™ã€‚

ãã‚“ãªæ‚©ã¿ã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã®ãŒ**Redocly**ã§ã™ã€‚OpenAPIä»•æ§˜æ›¸ã‹ã‚‰ç¾ã—ã„APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã€é–‹ç™ºãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¦ãã‚Œã¾ã™ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€Express + TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Redoclyã‚’å°å…¥ã—ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’å®Ÿéš›ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä»˜ãã§è§£èª¬ã—ã¾ã™ã€‚

## ğŸ“‹ ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨

- Redoclyã®åŸºæœ¬æ¦‚å¿µã¨åˆ©ç‚¹
- Express + TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å°å…¥æ–¹æ³•
- OpenAPIä»•æ§˜æ›¸ã®æ›¸ãæ–¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- ç¾ã—ã„APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•ç”Ÿæˆ
- é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¸ã®çµ±åˆæ–¹æ³•

## ğŸ¯ Redoclyã¨ã¯ï¼Ÿ

**Redocly**ã¯ã€OpenAPIä»•æ§˜æ›¸ã‹ã‚‰ç¾ã—ãèª­ã¿ã‚„ã™ã„APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### ä¸»ãªç‰¹å¾´

- ğŸ“– **ç¾ã—ã„UI**: ãƒ¢ãƒ€ãƒ³ã§ç›´æ„Ÿçš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ğŸ”§ **è‡ªå‹•ç”Ÿæˆ**: OpenAPIä»•æ§˜æ›¸ã‹ã‚‰è‡ªå‹•ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- ğŸ¨ **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½**: ãƒ†ãƒ¼ãƒã‚„ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«å¯¾å¿œ
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä¸¡å¯¾å¿œ
- ğŸ” **æ¤œç´¢æ©Ÿèƒ½**: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®é«˜é€Ÿæ¤œç´¢
- ğŸ“ **ã‚³ãƒ¼ãƒ‰ã‚µãƒ³ãƒ—ãƒ«**: è¤‡æ•°è¨€èªã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰è‡ªå‹•ç”Ÿæˆ

## ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# æœ¬ç•ªä¾å­˜é–¢ä¿‚
npm install express dotenv cors helmet morgan compression express-rate-limit

# é–‹ç™ºä¾å­˜é–¢ä¿‚
npm install -D typescript @types/node @types/express @types/cors @types/morgan 
npm install -D tsx @biomejs/biome prisma @prisma/client 
npm install -D express-openapi-validator @redocly/cli
```

### package.jsonã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨­å®š

```json
{
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "lint": "biome check --write .",
    "docs:lint": "redocly lint main@v2",
    "docs:build": "redocly build-docs main@v2 --output docs/redoc-static.html",
    "docs:serve": "npm run docs:build && npx http-server docs -p 8080 -o redoc-static.html",
    "docs:bundle": "redocly bundle main@v2 --output docs/openapi-bundle.yaml"
  }
}
```

## ğŸ“ OpenAPIä»•æ§˜æ›¸ã®ä½œæˆ

APIã®ä»•æ§˜ã‚’å®šç¾©ã™ã‚‹OpenAPIä»•æ§˜æ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚

```yaml
# api/openapi.yaml
openapi: 3.0.3
info:
  title: Express TypeScript Study API
  description: |
    # Express + TypeScriptå­¦ç¿’ç”¨API
    
    ã“ã®APIã¯ã€Express.js + TypeScriptã§ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚’å­¦ç¿’ã™ã‚‹ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«APIã§ã™ã€‚
    
    ## ä¸»ãªæ©Ÿèƒ½
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† (CRUD)
    - æŠ•ç¨¿ç®¡ç† (CRUD)  
    - èªè¨¼ãƒ»èªå¯
    - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    
    ## èªè¨¼æ–¹æ³•
    ç¾åœ¨ã¯èªè¨¼ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ãŒã€å°†æ¥çš„ã«JWTèªè¨¼ã‚’å®Ÿè£…äºˆå®šã§ã™ã€‚
    
    ## ãƒ¬ãƒ¼ãƒˆåˆ¶é™
    - 15åˆ†é–“ã«100ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§
    - åˆ¶é™ã‚’è¶…ãˆã‚‹ã¨429ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™
    
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com
    url: https://github.com/your-repo
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api/v1
    description: Development server

tags:
  - name: Users
    description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
  - name: Posts
    description: æŠ•ç¨¿ç®¡ç†API

paths:
  /users:
    get:
      tags:
        - Users
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—
      description: ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™
      operationId: getUsers
      parameters:
        - name: page
          in: query
          description: ãƒšãƒ¼ã‚¸ç•ªå·
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  schemas:
    User:
      type: object
      required:
        - id
        - email
        - name
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          format: uuid
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
        email:
          type: string
          format: email
          description: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
        name:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
          minLength: 1
          maxLength: 100
        bio:
          type: string
          description: è‡ªå·±ç´¹ä»‹
          maxLength: 500
        createdAt:
          type: string
          format: date-time
          description: ä½œæˆæ—¥æ™‚
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¥æ™‚
          
    Pagination:
      type: object
      required:
        - page
        - limit
        - total
        - totalPages
      properties:
        page:
          type: integer
          description: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸
        limit:
          type: integer
          description: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°
        total:
          type: integer
          description: ç·ä»¶æ•°
        totalPages:
          type: integer
          description: ç·ãƒšãƒ¼ã‚¸æ•°
```

## âš™ï¸ Redoclyè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```yaml
# redocly.yaml
extends:
  - recommended

apis:
  main@v2:
    root: api/openapi.yaml
    rules:
      # å¿…é ˆãƒ«ãƒ¼ãƒ« (ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒ™ãƒ«)
      operation-operationId: error
      operation-summary: error
      no-unused-components: error
      
      # æ¨å¥¨ãƒ«ãƒ¼ãƒ« (è­¦å‘Šãƒ¬ãƒ™ãƒ«)  
      tag-description: warn
      operation-description: warn
      operation-2xx-response: warn
      
      # ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«
      path-params-defined: error
      no-ambiguous-paths: error
      
      # å­¦ç¿’ç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ä¸€éƒ¨ãƒ«ãƒ¼ãƒ«ã‚’ç·©å’Œ
      security-defined: off  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æœªå®Ÿè£…ãªã®ã§OFF
      no-server-example.com: off  # localhostã‚µãƒ¼ãƒãƒ¼ã‚’è¨±å¯
      operation-4xx-response: warn  # 4xxãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯è­¦å‘Šãƒ¬ãƒ™ãƒ«

# OpenAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨­å®š
openapi:
  generateCodeSamples:
    languages:
      - lang: curl
      - lang: JavaScript  
      - lang: Python
  hideLogo: false
  hideDownloadButton: false
```

## ğŸš€ Redoclyã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹

### 1. ä»•æ§˜æ›¸ã®æ¤œè¨¼
```bash
npm run docs:lint
```

OpenAPIä»•æ§˜æ›¸ã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã¨ãƒ«ãƒ¼ãƒ«é•åã‚’æ¤œå‡ºã—ã¾ã™ã€‚

```
âœ… æˆåŠŸæ™‚ã®å‡ºåŠ›ä¾‹
Woohoo! Your API description is valid. ğŸ‰
You have 1 warning.
```

### 2. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç”Ÿæˆ
```bash
npm run docs:build
```

é™çš„HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ï¼ˆ122KBç¨‹åº¦ï¼‰ã€‚

### 3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
npm run docs:serve
```

http://localhost:8080 ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç¢ºèªã§ãã¾ã™ã€‚

### 4. ä»•æ§˜æ›¸ã®ãƒãƒ³ãƒ‰ãƒ«
```bash
npm run docs:bundle
```

è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’1ã¤ã®YAMLã«ã¾ã¨ã‚ã¾ã™ã€‚

## ğŸ“¸ å®Ÿéš›ã®Redoclyãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ãƒ¡ã‚¤ãƒ³ç”»é¢
![Redocly Overview](./images/redocly-overview.png)

- **å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼**: APIæ¦‚è¦ã¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **ä¸­å¤®ã‚¨ãƒªã‚¢**: è©³ç´°ãªAPIä»•æ§˜ã¨èª¬æ˜
- **æ¤œç´¢æ©Ÿèƒ½**: ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®é«˜é€Ÿæ¤œç´¢
- **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**: OpenAPIä»•æ§˜æ›¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### PostsAPIè©³ç´°ç”»é¢
![Redocly Posts API](./images/redocly-posts-api.png)

- **HTTPãƒ¡ã‚½ãƒƒãƒ‰**: GETã€POSTã€PUTã€DELETEãŒè‰²åˆ†ã‘è¡¨ç¤º
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: ã‚¯ã‚¨ãƒªãƒ»ãƒ‘ã‚¹ãƒ»ãƒœãƒ‡ã‚£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©³ç´°è¡¨ç¤º
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã”ã¨ã®ã‚µãƒ³ãƒ—ãƒ«
- **ã‚³ãƒ¼ãƒ‰ã‚µãƒ³ãƒ—ãƒ«**: cURLã€JavaScriptã€Pythonã®ã‚µãƒ³ãƒ—ãƒ«è‡ªå‹•ç”Ÿæˆ
- **ã‚¹ã‚­ãƒ¼ãƒ**: ãƒ‡ãƒ¼ã‚¿å‹ã¨åˆ¶ç´„ã®è©³ç´°è¡¨ç¤º

ç¾ã—ãæ•´ç†ã•ã‚ŒãŸAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒç”Ÿæˆã•ã‚Œã€é–‹ç™ºè€…ã«ã¨ã£ã¦éå¸¸ã«ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæä¾›ã•ã‚Œã¾ã™ã€‚å·¦å´ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§APIæ“ä½œã‚’ç´ æ—©ãè¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã€å³å´ã§ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è©³ç´°ãªæƒ…å ±ãŒç¢ºèªã§ãã¾ã™ã€‚

## ğŸ”§ Express.jsã¨ã®çµ±åˆ

### APIã‚µãƒ¼ãƒãƒ¼å†…ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæä¾›

```typescript
// src/middleware/apiDocs.ts
import express from 'express'
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import fs from 'node:fs/promises'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

const redocTemplate = `
<!DOCTYPE html>
<html>
  <head>
    <title>Express TypeScript Study API - Documentation</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">
    <style>
      body { margin: 0; padding: 0; }
    </style>
  </head>
  <body>
    <redoc spec-url="./openapi.yaml"></redoc>
    <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
  </body>
</html>
`

export const setupApiDocs = (app: express.Express) => {
  // OpenAPIä»•æ§˜æ›¸ã‚’æä¾›
  app.get('/openapi.yaml', async (_req, res) => {
    try {
      const yamlPath = path.join(__dirname, '../../api/openapi.yaml')
      const yamlContent = await fs.readFile(yamlPath, 'utf-8')
      res.setHeader('Content-Type', 'application/x-yaml')
      res.send(yamlContent)
    } catch (error) {
      res.status(404).json({ error: 'OpenAPI specification not found' })
    }
  })

  // Redocãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’æä¾›
  app.get('/api-docs', (_req, res) => {
    res.setHeader('Content-Type', 'text/html')
    res.send(redocTemplate)
  })
}
```

### Express.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆ

```typescript
// src/app.ts
import { setupApiDocs } from './middleware/apiDocs.js'

export const createApp = (): Express => {
  const app = express()
  
  // ãã®ä»–ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¨­å®š...
  
  // APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨­å®š
  setupApiDocs(app)
  
  return app
}
```

ã“ã‚Œã§ä»¥ä¸‹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- **Redocãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: http://localhost:3000/api-docs
- **OpenAPIä»•æ§˜æ›¸**: http://localhost:3000/openapi.yaml

## ğŸ’¡ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¸ã®çµ±åˆ

### CI/CDã§ã®æ´»ç”¨

```yaml
# .github/workflows/api-docs.yml
name: API Documentation

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  lint-api-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Lint OpenAPI specification
        run: npm run docs:lint
        
      - name: Build documentation
        run: npm run docs:build
        
      - name: Deploy to GitHub Pages
        if: github.ref == 'refs/heads/main'
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./docs
```

### Pre-commitãƒ•ãƒƒã‚¯ã§ã®å“è³ªç®¡ç†

```bash
# .husky/pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run docs:lint
npm run lint
npm run build
```

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¨ãƒ†ãƒ¼ãƒ

### ã‚«ã‚¹ã‚¿ãƒ CSSã®é©ç”¨

```css
/* docs/custom-theme.css */
:root {
  --main-color: #2563eb;
  --success-color: #10b981;
  --warning-color: #f59e0b;
  --error-color: #ef4444;
  --background-color: #f8fafc;
}

.redoc-wrap .api-info h1 {
  color: var(--main-color);
  font-size: 2.5rem;
  font-weight: 700;
}

.redoc-wrap .menu-content {
  background-color: var(--background-color);
  border-right: 1px solid #e2e8f0;
}

/* HTTPãƒ¡ã‚½ãƒƒãƒ‰ã®è‰²åˆ†ã‘ */
.redoc-wrap .http-verb.get { background-color: #10b981; }
.redoc-wrap .http-verb.post { background-color: #2563eb; }
.redoc-wrap .http-verb.put { background-color: #f59e0b; }
.redoc-wrap .http-verb.delete { background-color: #ef4444; }
```

### ãƒ“ãƒ«ãƒ‰æ™‚ã®è¨­å®š

```bash
redocly build-docs main@v2 \
  --output docs/api-docs.html \
  --theme.openapi.hideDownloadButton \
  --theme.openapi.nativeScrollbars
```

## ğŸ“Š Redoclyã®åˆ©ç‚¹ã¨ãƒ¡ãƒªãƒƒãƒˆ

### ğŸš€ é–‹ç™ºãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§å‘ä¸Š

- **è‡ªå‹•ç”Ÿæˆ**: æ‰‹å‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã®æ™‚é–“ã‚’å‰Šæ¸›
- **ä¸€å…ƒç®¡ç†**: ä»•æ§˜æ›¸ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®åŒæœŸãŒè‡ªå‹•åŒ–
- **å“è³ªä¿è¨¼**: ãƒªãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚‹ä»•æ§˜æ›¸ã®å“è³ªç®¡ç†
- **æ¤œç´¢æ€§**: å¤§è¦æ¨¡APIã§ã‚‚ç´ æ—©ãç›®çš„ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™ºè¦‹

### ğŸ‘¥ ãƒãƒ¼ãƒ é€£æºã®æ”¹å–„

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º**: APIã®ä»•æ§˜ãŒæ˜ç¢ºã§å®Ÿè£…ã—ã‚„ã™ã„
- **QAãƒ†ã‚¹ãƒˆ**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆã®å‚è€ƒã«ãªã‚‹
- **å–¶æ¥­ãƒ»ã‚µãƒãƒ¼ãƒˆ**: é¡§å®¢å‘ã‘è³‡æ–™ã¨ã—ã¦æ´»ç”¨å¯èƒ½
- **æ–°ãƒ¡ãƒ³ãƒãƒ¼**: ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒåŠ¹ç‡åŒ–

### ğŸ¢ ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã®å‰µå‡º

- **é¡§å®¢æº€è¶³åº¦**: åˆ†ã‹ã‚Šã‚„ã™ã„APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§é–‹ç™ºè€…ä½“é¨“å‘ä¸Š
- **ä¿å®ˆæ€§**: ä»•æ§˜å¤‰æ›´æ™‚ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°æ¼ã‚Œã‚’é˜²æ­¢
- **æ¨™æº–åŒ–**: ãƒãƒ¼ãƒ å…¨ä½“ã§APIè¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å…±æœ‰

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•

#### 1. Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
```bash
âš ï¸ Warning: failed to satisfy expected node version. 
Expected: ">=22.12.0 || >=20.19.0 <21.0.0", Current "v22.3.0"
```

**è§£æ±ºæ–¹æ³•**: Voltaã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
```bash
# Voltaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl https://get.volta.sh | bash

# é©åˆ‡ãªNode.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
volta install node@22.12.0
volta pin node@22.12.0
```

#### 2. OpenAPIä»•æ§˜æ›¸ã®ã‚¨ãƒ©ãƒ¼
```bash
âŒ Validation failed with 7 errors and 2 warnings.
```

**è§£æ±ºæ–¹æ³•**: ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç¢ºèªã—ã¦ä¿®æ­£
```bash
npm run docs:lint --generate-ignore-file
```

#### 3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®ã‚¨ãƒ©ãƒ¼
```bash
Error [ERR_REQUIRE_ESM]: require() of ES Module
```

**è§£æ±ºæ–¹æ³•**: ä»£æ›¿æ‰‹æ®µã‚’ä½¿ç”¨
```bash
npm run docs:build && npx http-server docs -p 8080 -o redoc-static.html
```

## ğŸ“š å‚è€ƒè³‡æ–™ã¨ãƒªãƒ³ã‚¯

- [Redoclyå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://redocly.com/docs/cli/)
- [OpenAPIä»•æ§˜æ›¸](https://swagger.io/specification/)
- [express-openapi-validator](https://github.com/cdimascio/express-openapi-validator)
- [ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ](https://github.com/your-repo/express-typescript-study)

## ğŸ¯ ã¾ã¨ã‚

Redoclyã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€OpenAPIä»•æ§˜æ›¸ã‹ã‚‰ç¾ã—ãå®Ÿç”¨çš„ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚

### ä¸»ãªåŠ¹æœ

- âœ… **é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆãƒ»ç®¡ç†æ™‚é–“ã‚’90%å‰Šæ¸›
- âœ… **å“è³ªã®å‘ä¸Š**: ãƒªãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚‹ä»•æ§˜æ›¸ã®å“è³ªä¿è¨¼
- âœ… **ãƒãƒ¼ãƒ é€£æº**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»QAãƒ»å–¶æ¥­ã¨ã®é€£æºå¼·åŒ–
- âœ… **é–‹ç™ºè€…ä½“é¨“**: ç¾ã—ãæ¤œç´¢ã—ã‚„ã™ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å°å…¥ã®ãƒã‚¤ãƒ³ãƒˆ

1. **æ®µéšçš„å°å…¥**: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚å°‘ã—ãšã¤å°å…¥å¯èƒ½
2. **ãƒ„ãƒ¼ãƒ«çµ±åˆ**: CI/CDã€pre-commitãƒ•ãƒƒã‚¯ã¨ã®é€£æº
3. **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: ãƒãƒ¼ãƒ ã‚„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«åˆã‚ã›ãŸãƒ†ãƒ¼ãƒè¨­å®š

APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®èª²é¡Œã‚’æŠ±ãˆã¦ã„ã‚‹ãƒãƒ¼ãƒ ã¯ã€ãœã²Redoclyã®å°å…¥ã‚’æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ï¼

---

ã“ã®è¨˜äº‹ãŒå½¹ã«ç«‹ã£ãŸã‚‰ã€ã„ã„ã­ğŸ‘ã‚„ã‚³ãƒ¡ãƒ³ãƒˆğŸ’¬ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼
è³ªå•ãŒã‚ã‚Œã°æ°—è»½ã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ ğŸ™‹â€â™‚ï¸